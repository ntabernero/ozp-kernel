<?xml version="1.0" encoding="UTF-8"?>

<features name="org.ozoneplatform.kernel.features-repo">

    <feature name="bundletracker" version="${project.version}" description="${bundletracker.description}">
        <bundle start-level="80">mvn:org.ozoneplatform.kernel.bundles.server/bundletracker/${project.version}</bundle>
    </feature>

    <feature name="jetty7.6" version="${project.version}" description="Custom Jetty 7.6 Features">
        <bundle dependency="true" start-level="50">mvn:org.apache.geronimo.specs/geronimo-servlet_3.0_spec/${geronimo3.servlet.version}</bundle>
        <!-- Dependencies -->
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-client/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-server/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-util/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-continuation/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-webapp/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-http/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-servlet/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-servlets/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-io/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-websocket/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-xml/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-security/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-plus/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-jmx/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-jndi/${jetty7.6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.eclipse.jetty/jetty-ajp/${jetty7.6-version}</bundle>
    </feature>

    <feature name="atmosphere-runtime-framework" version="${project.version}" description="Atmosphere Runtime (${atmosphere.version}) Framework Feature">
        <!-- Dependencies -->
        <!--<feature>jetty7.6</feature> -->
        <bundle dependency="true" start-level="60">mvn:org.atmosphere/atmosphere-compat-tomcat7/${atmosphere.version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.atmosphere/atmosphere-compat-tomcat/${atmosphere.version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.atmosphere/atmosphere-compat-jbossweb/${atmosphere.version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.mortbay.jetty/jetty/${jetty6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.mortbay.jetty/jetty-util/${jetty6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.mortbay.jetty/jetty-management/${jetty6-version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.codehaus.groovy/groovy-all/${groovy-all.version}</bundle>
        <bundle dependency="true" start-level="60">mvn:org.codehaus.jackson/jackson-jaxrs/${jackson-jackson.version}</bundle>
        <bundle dependency="true" start-level="70">mvn:org.atmosphere/atmosphere-runtime/${atmosphere.version}</bundle>
        <bundle dependency="true" start-level="70">mvn:org.apache.cxf/cxf-bundle-jaxrs/${cxf2.6-version}</bundle>
    </feature>

    <feature name="atmospherebus" version="${project.version}" description="${atmospherebus.description} Feature">
        <!-- Dependencies -->
        <!--<feature>jetty7.6</feature>-->
        <feature>atmosphere-runtime-framework</feature>

        <!-- Core -->
        <bundle>mvn:org.ozoneplatform.kernel.bundles.server.atmosphere.api/atmospherebus-api/${project.version}</bundle>
        <bundle>mvn:org.ozoneplatform.kernel.bundles.server.atmosphere.service/atmospherebus-service/${project.version}</bundle>
        <bundle>mvn:org.ozoneplatform.kernel.bundles.server.atmosphere.rest/atmospherebus-rest/${project.version}</bundle>
    </feature>

</features>
